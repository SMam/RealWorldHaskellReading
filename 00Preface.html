<h2>Have We Got a Deal for You!</h2>

Haskellは深みのある言語; 学ぶことで大いに酬われるだろう。何故かを3点にしぼって説明しよう。
第一に「新規性」:プログラミングについて、ある異なった価値ある視点から考えるようになる
次に「力」:どのようにソフトウェアを短く、速く、安全に作るかお見せしよう
最後に多くの「楽しさ」:実際の問題を解決するために美しいプログラミング技術を適用する楽しみ

新規性
Haskellは恐らくあなたがこれまで使ってきたいかなる言語とも極めて異なっている。プログラマーの心の道具箱にある普段の概念と比べると、関数型プログラミングはソフトウェアに対する根本的に異なった考え方を提供する
Haskellではデータを改変するコードを重視しない。その代わり、入力に不変(immutable)の値を取り、出力として新しい値を作る関数に注目する。同じ入力に対してこれらの関数は常に同じ結果を返す。これが関数型プログラミングの背後にある核となる考えだ。
データを変更しないのと同時に、われわれのHaskellの関数は普通は外の世界には語りかけない。これらの関数を「pure」なものと呼ぶ。我々はpureなコードと、プログラムの中でファイルの読み書き、ネットワーク通信、またはロボットの腕を動かす部分を強く区別する。このことでプログラムを構成し、推論し、テストすることが容易となる。
基本的と思える考え方で捨てられたものもある、例えば組み込みの"for"ループなどだ。それ以外の、もっと柔軟な、反復するタスクを実行する方法があるのだ。
表現を評価する方法でさえHaskellでは異なっている。全ての計算は、本当に結果が必要となるまで延期する--Haskellは「怠け者」言語だ。遅延は単に処理順の問題ではなく、どのようにプログラムを書くかに大いに影響する。

力
本書を通して、Haskellのこれまでの言語の機能の置き換えがいかに強力で柔軟でコードの信頼性につながるかをお見せする。Haskellにはすばらしいソフトウェアの作り方の最先端のアイデアを積極的に詰め込んである。
pureなコードは外の世界と関係せず、またそれが扱うデータは決して変更されないので、一部のコードが別に使われるデータを陰で壊すような不愉快な驚きの類はとても稀だ。pureな関数を使うどのような局面であれ、関数は一貫して振る舞うだろう。
pureなコードは外の世界とか変わるコードよりもテストしやすい。ある関数が明示的な入力にのみ反応するなら、その振る舞いが常に真であるべきという性質について示すのは容易だ。こういった属性が大量のランダムな入力に対して保たれていることは自動的にテストでき、テストがパスしたなら先へ進める。ファイルやネットワークや外部のハードウェアとの連携を行うコードをテストするには、未だに伝統的なテスト技術を用いている。このようなpureでないコードは伝統的な言語よりもはるかに少ないので、われわれのソフトウェアは堅固であるとより自信を持てる。
遅延評価には驚くべき効果がいくつかある。ソートされていないリストから最小でkの値の要素を見つけたいとしよう。伝統的言語では、明白な解法はリストをソートして、最初のkの要素をとるだろう。しかしこれは不経済だ。効率的にするために、代わりに1回のパスでこれらの値をとる特別な関数を書くだろうが、ちょっと複雑な記録法を使わなければならないだろう。Haskellでは「ならべて-取る」(sort-then-take)アプローチが実際によく機能する:そのリストは最小kの要素を見つけるのに必要なだけしかソートされないことを遅延が保証する。
さらに良いことに、我々の効率的なHaskellコードは小さく、標準ライブラリ関数を用いる:
<pre>
-- file: ch00/KMinima.hs
-- lines begining with "--" are comments.

minima k xs = take k (sort xs)
</pre>

遅延評価が重要と直感できるようになるには時間がかかるが、それを利用すれば、結果コードはきれいに、簡潔に、効率的になることが多い。
先の例が示すように、Haskellの力の重要な局面は書かれるコードのコンパクトさにある。一般的な伝統的言語で行うことと比べて、Haskellでの開発ではより少なく、したがってより短い時間でコードを書き、バグも少ないことが多い。

楽しさ
Haskellでのプログラミングの基礎を拾いあげることは簡単だと思うし、小さなプログラムは数時間から数日のうちにうまく書けるだろうと思う。
Haskellでの効果的なプログラミングは他の言語とは異なるため、言語そのものと関数型プログラミングの両方を覚えるには多くの思考と練習が必要と思った法が良い。

Haskellを始めた頃を思い起こせば、良い知らせは楽しみが早く始まることだ:あたらしい言語ーーそこでは多くのありきたりのアイデアが異なっていたりなかったりーーにのめりこむこと、そして単純なプログラムをどうやって書くかを理解するのは単純に楽しい挑戦だ。
我々にとって当初の楽しみは経験が進み、理解が深まって続いた。他の言語ではサイエンスとプログラミングの部品との間の関係を見出すのは困難だ。Haskellでは我々は抽象数学からいくつかのアイデアを取り込んで、動かした。よかったのはこれらのアイデアが拾いやすかっただけでなく、より小さく、再利用できるコードを書くのに実際的な役立ったことだ。
更には我々はあなたの進路のいかなる邪魔もしない。この本には効率的にプログラムするのに覚えなければいけないような特別に難しい、身の毛もよだつような技術は書かれていない。

言わばHaskellは厳格な言語だ:あなたは前もって考えるようになる。あなたがコードを走らせさえする前に、コンパイラがコードのどこかが意味を成さないというのに対応して、デバッグするようになるにはちょっと時間がかかるだろう。何年も経験しても、まだHaskellのプログラムが、一旦このようなコンパイルエラーを修正すれば、初回試行で動くことが多いことに驚き、喜ばされる。


<h2>What to Expect from This Book</h2>

我々がこのプロジェクトを始めたのは日常的な問題解決にHaskellを使う人が増えているからだ。Haskellはその根本を学問に置いているので、現存するHaskellの本で、われわれが興味ある典型的なプログラミングでの問題や技術に注目したものはほとんどない。
この本では我々は現実的な問題解決のためにどのように関数型プログラミングとHaskellを使うかを示そう。手を動かしながら進めよう:全ての章には何十ものコードの例が含まれ、多くの章では完全なアプリケーションが含まれる。ここに開発方法を示すライブラリ、技術、ツールの数例を示す。

<ul>
<li>インターネットからpodcastの何篇かをダウンロードして、SQLデータベースに履歴を保存するアプリケーションを作る
<li>あなたのコードを直感的、強力な方法でテストする。真であるべき属性を記述し、それからQuickCheckライブラリに自動的にテストケースを作成させる
<li>電話の低解像度のカメラでバーコードを撮影し、図書館や書店のサイトで使えるような識別子にする。
<li>webで成功するコードを書く。JSON記法を使って他の言語で書かれたサーバやクライアントとデータを交換する。同時性のあるリンクチェッカを開発する。
</ul>

<h2>A Little Bit About You</h2>
この本を読む前にあなたは何を知る必要があるだろう。我々はあなたは既にプログラムの仕方を知っていることを期待するが、関数型言語を一度も使ったことがなくても大丈夫。
あなたの経験値によらず、我々はあなたの要求に応えたい;我々は我々のやり方で新しい、可能性の多い巧妙なアイデアを説明する。通常は例と画像を用いて to drive our points home.
新人Haskellプログラマとしてあなたは必然的にちょっとしたコードを手で書くことを始めるだろう、ライブラリ関数やプログラム技術をその存在を知っていればそのために使って(?) 本書には可能な限りあなたを早めるような情報をつめこんだ。
勿論道にはいくつかの障害物は付きものだ。もしあなたが楽しみの中で予期せぬ驚きや困難を予期したなら、最良の経験となるだろう。どんなラフなパッチも長くは続かない。
より熟練したHaskellプログラマになるにつれて、コードの書き方は変わるだろう。実際本書の教程を終えて、我々が提示するコードは進化するだろう、それは言語の基礎からより強力な生産的な機能、技術へと移動するからだ。

<h2>What to Expect from Haskell</h2>
Haskellは汎用言語である。いかなる隙間アプリケーションを想定せずにデザインされたものである。それはいかにプログラムが書かれるべきかについて強い立場を取るものだが、一つの問題領域を偏重するものではない。
その核では、言語はpureな、遅延スタイルの関数型プログラミングを勧めるが、これはデフォルトのもので唯一の選択肢では無い。Haskellは手続き型のコードや厳格な評価の伝統的モデルもサポートする。加えて、言語の着目点が真っ向から静的型付けプログラムであっても、Haskellコードを動的型付け式に書くことはできる(稀ではあるが)

<h2>Compared to Traditional Static Languages</h2>
単純な静的型付けシステムを用いる言語は数十年の間プログラム界で大黒柱であった。Haskellは静的型付けだが、どんな型があり、それでどうするかという考えは伝統的言語に比べてより柔軟だ。型はHaskellのプログラムでの簡潔さ、明瞭さ、効率にもっとも寄与している。
力強いものの、Haskellの型のシステムはしばしばまた控えめなものだ。もし型情報を明かにすることを忘れても、Haskellコンパイラは自動的に表現あるいは関数の型を推論するだろう。多量の型情報を与えなければならない伝統的静的言語と比べて、Haskellの型システムの力と推論の組み合わせは明らかにコードの混乱と冗長を減らしている。
Haskellの他の機能の多くは、スクリーン一杯のテキストに詰め込める業務量の更なる増加と関連づく。このことは開発時間と迅速さの改善をもたらす;我々は要求の変化に応じて信頼性のあるコードを素早く作り、簡単にリファクタリングできる。
時にHaskellのプログラムはCやC++で書かれた似たようなプログラムよりも遅いかもしれない。我々が書くコードの大部分にとって、Haskellの生産性と信頼性での大きな利点はパフォーマンスの小さな欠点を上回る。
マルチコアプロセッサはいまやどこにでもあるが、伝統的言語を用いてプログラムすることはまぎれもなく困難なままだ。Haskellはマルチコアプログラミングをより素直に行える独特の技術を提供する。並列プログラミング、信頼できる同時性のためのメモリのトランザクションをサポートし、数百、数千の同時スレッドまで拡大可能だ。

<h2>Compared to Modern Dynamic Languages</h2>
この十年間、動的型付けのインタプリタ言語はより一般的になってきた。それらは開発者の生産性に相当な恩恵をもたらした。このことはしばしば大きなパフォーマンスの改善につながるが、多くのプログラム業務にとって生産性はパフォーマンスに勝るか、パフォーマンスはいかなる場合にも重要な要素ではない。
簡潔性はHaskellと動的型付け言語が似たように働く領域だ;どちらの場合、問題を解決するために伝統的言語に比べてより少ないコードを書くことになる。プログラムは動的型付け言語とHaskellで大体同じ大きさとなることが多い。
実行時のパフォーマンスを考えると、Haskellはたいてい常に大きな利点をもつ。Glasgow Haskell Compiler(GHC)でコンパイルされたコードは典型的には動的型付け言語のインタプリタで実行されたときの20から60倍速い。GHCはインタプリタも提供するので、スクリプトをコンパイルしなくとも実行できる。
動的型付け言語とHaskellの間のもう一つの大きな違いは型に関わる哲学にある。動的型付け言語が人気がある大きな理由は、我々が型について明示的に言及する必要があるのが稀であるからだ。自動的な型推論により、Haskell は同じ利点をもつ
iこの表面的な相似性を越えて、違いは深まっていく。動的型付け言語では我々は静的型付け言語では表現困難な構造を作ることができる。しかしながら、逆もまた真なり:Haskellのものと同じような強力な型システムを用いて、我々は動的型付け言語では管理できないか、実行できない方法でプログラムを構築できる。
これらアプローチのそれぞれは両立しないものを含んでいることを認識することは重要だ。非常に簡潔に言えば、Haskellの視点は安全性を強調し、一方で動的型付け言語は柔軟性を重視するようだ。もし誰かが既に常に最善となる型についての一つの考え方を発見していたら、もうみんながそれを知っていると思う。
勿論我々筆者は、両立しないことにより有益な部分があるという意見をもっている。我々のうち二人は動的型付け言語での何年ものプログラム経験がある。我々はそれで仕事をするのが好きだ;今でも毎日使っている、が、Haskellのほうが好きなのだ。

<h2>Haskell in Industry and Open Source</h2>
ここにHaskellで作られた大きなソフトウェアシステムの例をほんのいくつか示す。あるものはオープンソースであり、あるものは商用である。
<ul>
<li>ASICとFPGAデザインソフトウェア(Lava、Bluespec,Inc製)
<li>作曲ソフトウェア(Haskore)
<li>コンパイラと関連ツール(特にGHC)
<li>分散リビジョン管理(Darcs)
<li>webミドルウェア(HAppS、Galois,Inc製)
</ul>
以下は<a href="">Haskell wiki</a>から、2008年後半にHaskellを使っている会社のいくつかの例

ABN AMRO
国際銀行。投資業務において、counterparty risk on portfolios of financial derivativesの評価にHaskellを用いている

Anygma
スタートアップ企業。Haskellを用いてマルチメディアコンテンツ作成ツールを開発

Amgen
バイオテクノロジー企業。Haskellで数学的モデルやそのほかの複雑なアプリケーションを作成

Bluespec
ASCIとFPGAデザインソフトウェアベンダ。その製品はHaskellで開発され、製品の提供するチップデザイン言語はHaskellの影響を受けている

Eaton
油圧ハイブリッド車両システムのデザインと検証にHaskellを使用

<h2>Compilation, Debugging, and Performance Analysis<h2>
実際の業務には、言語そのものと同じぐらい重要なのはライブラリのエコシステムとそれに関するツールである。Haskellはこの領域では強力に見栄えがする。
もっともよく使われているコンパイラ、GHCは15年以上にわたり活動的に開発されてきており、成熟した安定した機能を提供する。
<ul>
<li>全てのモダンなOSとCPUアーキテクチャ上で効率的なネイティブコードへのコンパイルを行う
<li>ライセンスの制限にわずらわされずに、簡単にバイナリを開発できる
<li>コードカバレッジ(網羅率)分析
<li>パフォーマンスとメモリ使用の詳細な分析
<li>完璧なドキュメント
<li>平行的、マルチコアプログラミングの大規模化サポート
<li>インタラクティブなインタプリタとデバッガ
</ul>

<h2>Bundled and Third-Party Libraries</h2>
GHCコンパイラは有用なライブラリ集と同梱される。一般的プログラミングに必要ないくつかの機能をあげる

<ul>
<li>ファイルI/O、ファイルシステムの縦覧と操作
<li>ネットワーククライアント/サーバプログラミング
<li>正規表現と分析
<li>平行プログラミング
<li>自動化テスト
<li>サウンドとグラフィック
</ul>

Hackage パッケージデータベースはHaskellコミュニティーのオープンソースライブラリとアプリケーション集である。Hackageで発行されたライブラリのほとんどは商用およびオープンソースでの利用を許容する自由な条件でライセンスされている。このようなオープンソースライブラリで補われている領域には次のようなものがある:
<ul>
<li>全ての主要なオープンソースあるいは商用のデータベースへのインターフェイス
<li>XML、HTML、XQueryの演算
<li>ネットワークとwebのクライアント・サーバ開発
<li>GUIの開発、クロスプラットフォームツールキットを含む
<li>Unicodeやその他の文字エンコードのサポート
</ul>



